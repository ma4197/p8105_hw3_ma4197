---
title: "p8105_hw3_ma4197"
author: "Mayuri Albal"
date: "2022-10-15"
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
library(tidyverse)
library(ggplot2)
library(readxl)
library("scales")
```

##Problem 1
```{r}
library(p8105.datasets)
data("instacart")
```


##Problem 2

```{r}
accel_data = read_csv(file= "./data/accel_data.csv") %>%
janitor::clean_names() %>%
  mutate(
    wkd_wkn= ifelse(day %in% c('Sunday', 'Saturday'), 'weekend', 'weekday')) %>% 
  relocate(week,day_id, day,wkd_wkn) %>%
  pivot_longer(
    activity_1:activity_1440,
    names_to = "active_num",
    names_prefix = "activity_",
    names_transform=list(activity_= as.numeric),
    values_to = "active_counts")
   
view(accel_data)
skimr::skim(accel_data)
```
In this cleaned dataset of 'accel_data' there are 6 variables: "week", "day_id", "day",
"wkd_wkn", "active_num", "active_count". "Active_num" and "active_count" were generated
from the previously displayed data for each activity that would occur (1-1440) and the 
corresponding count value the accelerometer measured. There are 50,400 observations within
this new data set.


###Aggregated Data
```{r}
accel_data %>% 
  group_by(day_id) %>% 
  mutate(
    tot_active= sum(active_counts)) %>% 
  summarize(day_id, tot_active) %>% 
  distinct %>% 
  print (n=)
```

####Explanation
Based on the printed table above, there are 35 days included in the data set. When observing
the total activity counts ("tot_active") across the 35 days, there does not appear to be
an definable trend in the total activity of the individual. However, there are dips in total
activity count on days 24 and 31.

###Graphing

```{r}
knitr::opts_chunk$set(
  fig.width = 6,
  fig.asp = .6,
  out.width = "90%"
)
```

Without Lines
```{r}
ggplot(accel_data, aes(x= active_num, y= active_counts)) +
  geom_point(aes(color= day), alpha=0.5) +
  theme_classic()+ 
  theme(legend.position= "bottom")+
  ggtitle("24-Hour Activity Time Count")+
  theme(plot.title = element_text(hjust= 0.5))+
    labs(x = "Active Minutes",
        y= "Active Counts") +
   scale_colour_brewer(type = "seq", palette = "Spectral")
```
With Lines

```{r}
ggplot(accel_data, aes(x= active_num, y= active_counts, color=day)) +
  geom_point(aes(color= day), alpha=0.5) +
  geom_line(aes(group= day, color=day))+
  theme_classic()+ 
  theme(legend.position= "bottom")+
  ggtitle("24-Hour Activity Time Count")+
  theme(plot.title = element_text(hjust= 0.5))+
    labs(x = "Active Minutes",
        y= "Active Counts") +
   scale_colour_brewer(type = "seq", palette = "Spectral")
```


####Explanation
Based upon this graph, there appears to peaks in active counts being measured from the
accelerometer on Saturday and Sunday for this participant. (ADD MORE)

##Problem 3

```{r}
library(p8105.datasets)
data("ny_noaa")
view(ny_noaa)
skimr::skim(ny_noaa)
```
####Description
In the "ny_noaa" there are 7 variables and 2,595,176 observations. This data looks
at the 5 key variables that all New York weather stations assess, from January 1, 1981, to December 31st, 2010. Key variables include:'id', 'date', 'prcp', 'snow', 'snwd', 'tmax' and 'tmin'. In this data set, a significant portion of the data is missing from some of the variables. For prcp, about 145,838 observations are missing, with approximately 94.38% of the data having observations for the variable. For snow and snwd, approximately 85.31% and 77.19% of the data have observations for those variables. However for both tmax and tmin only 56.29%
of the data have observation  values for these variables, indicating that overall the missing data may bias the analysis due to the portion missing/labeled na.

###Part 1- Data Cleaning
```{r}
ny_noaa= ny_noaa %>% 
  janitor::clean_names() %>% 
  separate(date, c("year", "month", "day"), sep = "-") %>% 
  mutate( 
  month = recode(month,
      '01' = "january", '02'= "february", '03'= "march", '04'= "april", '05'= "may",
      '06'= "june", '07'= "july", '08'= "august", '09'= "september", '10'= "october", 
      '11' = "november", '12' = "december"))
view(ny_noaa)
```

